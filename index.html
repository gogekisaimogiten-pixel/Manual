<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0f17" />
  <title>語劇祭 模擬店 統括マニュアル</title>
  <style>
    :root{
      --bg:#070a10; --card:#0c1220; --card2:#0a1222;
      --txt:#e9eefc; --muted:#a7b3d1; --line:rgba(255,255,255,.08);
      --accent:#7aa2ff; --danger:#ff6b6b;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:radial-gradient(1200px 700px at 20% 0%, #0f1b3a 0%, var(--bg) 55%) fixed;
      color:var(--txt); font-family:-apple-system,BlinkMacSystemFont,"Hiragino Sans","Noto Sans JP",system-ui,Segoe UI,Roboto,Helvetica,Arial;
    }
    .wrap{max-width:980px;margin:0 auto;padding:24px 14px 56px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line); border-radius:18px; padding:18px;
      box-shadow:0 18px 50px rgba(0,0,0,.35);
    }
    .title{
      display:flex; gap:10px; align-items:flex-start; margin:0 0 10px;
      font-weight:800; letter-spacing:.02em; font-size:26px; line-height:1.2;
    }
    .sub{margin:0 0 14px; color:var(--muted); line-height:1.6}
    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    input{
      flex:1; min-width:180px;
      padding:14px 14px; border-radius:14px;
      border:1px solid var(--line); outline:none;
      background:rgba(0,0,0,.22); color:var(--txt);
      font-size:16px;
    }
    button{
      padding:12px 14px; border-radius:14px; border:1px solid var(--line);
      background:rgba(122,162,255,.16); color:var(--txt);
      font-weight:700; font-size:16px;
    }
    button:active{transform:translateY(1px)}
    .smallbtn{background:rgba(255,255,255,.06)}
    .err{margin-top:10px;color:var(--danger);font-weight:700;display:none}
    .ok{margin-top:10px;color:#7dffb2;font-weight:700;display:none}

    #app{display:none}
    .hr{height:1px;background:var(--line);margin:14px 0}
    .hint{color:var(--muted);font-size:13px;line-height:1.5}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- LOCK SCREEN -->
    <div id="lockScreen" class="card">
      <h1 class="title">🔒 このマニュアルはパスワードが必要です</h1>
      <p class="sub">統括向けの内容（機密/注意事項）を含みます。関係者のみ閲覧してください。</p>

      <div class="row">
        <input id="pw" type="password" inputmode="text" placeholder="パスワード" autocomplete="current-password" />
        <button id="unlockBtn" type="button">開く</button>
      </div>

      <div class="row" style="margin-top:10px;">
        <label style="display:flex;gap:8px;align-items:center;color:var(--muted);">
          <input id="remember" type="checkbox" style="width:18px;height:18px;flex:none;" checked />
          この端末で記憶
        </label>
        <button id="helpHashBtn" type="button" class="smallbtn">管理者：ハッシュ作成</button>
        <button id="logoutBtn" type="button" class="smallbtn" style="display:none;">ログアウト</button>
      </div>

      <div id="err" class="err"></div>
      <div id="ok" class="ok"></div>

      <div class="hr"></div>
      <div class="hint">
        ※これは「運用ロック」です。GitHub Pagesに置く以上、完全な秘匿ではありません。<br/>
        でも関係者以外がサクッと読めないようにする目的には十分効きます。
      </div>
    </div>

    <!-- APP -->
    <div id="app" class="card">
      <h1 class="title">語劇祭 模擬店 統括マニュアル（整理版）</h1>
      <p class="sub">ナナメ読み→必要な章だけ深掘り。検索もしやすい構成。</p>
      <div class="hr"></div>

      <!-- ここに本文を貼る -->
      <section class="doc">

<h1>語劇祭 模擬店 統括マニュアル</h1>
<p class="small">
このマニュアルはかなり細かく書いてあります。まずはナナメ読みして全体像を把握し、実務のときに該当箇所を開いてください。
</p>

<details open>
<summary>🎯 私たちの仕事・大切なこと</summary>
<p><b>11月末の語劇祭模擬店において、学生と大学側をつなぐ役割</b>を担います。</p>
<p class="small">実社会でも同様の役割があり、良い経験になります。「統括」はガクチカにも強い肩書きです。</p>
<p class="warn">※この企画はまだ歴史が浅く、事故があると中止になる可能性があります。事前ルールと注意喚起が最重要です。</p>
</details>

<details>
<summary>🗺 基本的な流れ（時系列）</summary>
<ol>
<li>募集（7月中頃〜8月下旬）</li>
<li>企画書集め（1次：9月中旬、本：10月初旬）</li>
<li>施設利用・借用申請</li>
<li>店舗配置決定</li>
<li>シフト＆フォーム作成</li>
<li>設営</li>
<li>本番</li>
</ol>
</details>

<details>
<summary>📢 募集（7月中旬〜下旬）</summary>

<p><b>準備物</b></p>
<ul>
<li>運営LINEグループ</li>
<li>Teams（学内メールでログイン）</li>
<li>説明会スライド</li>
<li>Google Form（参加申請）</li>
<li>公式メール・YouTube</li>
<li>参加者LINE</li>
<li>管理用Excel</li>
</ul>

<p><b>募集の流れ</b></p>
<p>配信メール → オンライン説明会 → フォーム申請</p>
<p class="small">説明会を見ない人は基本申請しないので「参加後申請」でOK。</p>

<p><b>集める情報</b></p>
<ul>
<li>名前（よみがな）</li>
<li>学内メール</li>
</ul>

<p class="small">TeamsをPC・スマホ両方に入れてもらう。事務所連携と説明会に必須。</p>

<p><b>説明会</b></p>
<ul>
<li>Teamsで実施</li>
<li>待機室ON（荒らし対策）</li>
<li>リハーサル必須</li>
</ul>

<p class="warn">URLだけでなくルームIDとパスワードも必ず配信。</p>
<p class="small">表示名は「専攻語＋学年＋名前」。顔出しは任意だが推奨。</p>

<p><b>申請フォーム 必須項目</b></p>
<ul>
<li>代表・副代表の名前</li>
<li>専攻・学年</li>
<li>電話番号</li>
<li>代表のメール</li>
</ul>

<p class="small">LINEグループQRは代表のメールへ送信。副代表も入るよう指示。</p>
</details>

<details>
<summary>📄 企画書（8月〜10月）</summary>

<p><b>期限</b></p>
<ul>
<li>初稿：9月中旬</li>
<li>最終：10月初旬</li>
<li>訂正版：10月25日前後</li>
</ul>

<p class="small">事務所→北岡先生の順でチェック。逆にしない。</p>

<p class="warn">飲み物・食品の包装は特に厳しい。個包装でないものはNG。</p>

<p class="small">企画書に番号を振り、管理用Excelで誰のものか管理する。</p>
</details>

<details>
<summary>🏢 書類・物品・配置（10月）</summary>

<p><b>借用申請</b></p>
<p>机・椅子・電源・家電を専攻ごと＋合計で記入</p>
<p class="warn">電話番号は（0）70-…形式で書く（0が消えるため）</p>

<p><b>机の制限</b></p>
<p>長机は最大12台。足りない場合は普通の机2台で代用。</p>

<p><b>電気ポット</b></p>
<p>各専攻1台目安。水は各自購入。混ざらないよう看板必須。</p>

<p><b>配置</b></p>
<p>1階と3階に6団体ずつ。1階は飲食不可。</p>
<p class="small">3階は半分しか使えない。階段前はNG。</p>
</details>

<details>
<summary>🕒 シフト（11月中旬）</summary>

<p><b>毎時間の確認</b></p>
<ul>
<li>販売内容が企画書通りか</li>
<li>ゴミ箱が満杯でないか</li>
<li>1階で飲食していないか</li>
<li>不審者・ポットの空焚き</li>
</ul>

<p class="small">1時間に1回チェックすればOK。ずっと巡回不要。</p>

<p class="warn">1日目にゴミ捨てした団体は2日目免除。</p>
</details>

<details>
<summary>📦 前日準備</summary>

<p><b>設営</b></p>
<p>金曜夕方。盗難責任なしで前日設営OK。</p>

<p><b>ゴミ箱</b></p>
<p>1階・3階に燃える・燃えない・ビン缶ペットを用意。</p>
<p class="small">袋は箱の底にストック。</p>

</details>

<details>
<summary>🎪 本番</summary>

<p><b>持ち物</b></p>
<ul>
<li>カラー紙</li>
<li>マジック</li>
<li>はさみ</li>
<li>テープ</li>
<li>除菌シート</li>
</ul>

<p class="warn">容器変更など保健所違反があれば即販売停止。</p>

<p><b>撤収</b></p>
<p>19:30までに全撤収。養生テープは物品確認後に剥がす。</p>
</details>

<details>
<summary>📊 終了後</summary>
<p>各団体から売上を回収し、企画書を次年度へ引き継ぐ。</p>
<p class="small">価格変更があっても総売上が分かればOK。</p>
</details>

</section>

    </div>

  </div>

<script>
(() => {
  // ✅ SHA-256("mmm") はこれ（あなたの今のパスワード）
  const PASSWORD_HASH = "8b7293f6dd93853c83bf8c87ec5349a41789fa166a9431f108edb538e6fd82fd";
  const LS_KEY = "mogiten_manual_authed_v1";

  const lockScreen = document.getElementById("lockScreen");
  const app = document.getElementById("app");
  const err = document.getElementById("err");
  const ok = document.getElementById("ok");
  const pw = document.getElementById("pw");
  const remember = document.getElementById("remember");
  const unlockBtn = document.getElementById("unlockBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const helpHashBtn = document.getElementById("helpHashBtn");

  function showErr(msg){
    err.textContent = msg;
    err.style.display = "block";
    ok.style.display = "none";
  }
  function showOk(msg){
    ok.textContent = msg;
    ok.style.display = "block";
    err.style.display = "none";
  }

  async function sha256Hex(str){
    const enc = new TextEncoder().encode(str);
    const buf = await crypto.subtle.digest("SHA-256", enc);
    return [...new Uint8Array(buf)].map(b => b.toString(16).padStart(2, "0")).join("");
  }

  function unlockUI(){
    lockScreen.style.display = "none";
    app.style.display = "block";
    logoutBtn.style.display = "inline-block";
  }
  function lockUI(){
    app.style.display = "none";
    lockScreen.style.display = "block";
    logoutBtn.style.display = "none";
  }

  // 初期：記憶があれば自動解除
  try{
    if (localStorage.getItem(LS_KEY) === "1") unlockUI();
  }catch(e){ /* ignore */ }

  unlockBtn.addEventListener("click", async () => {
    err.style.display = "none";
    ok.style.display = "none";

    const input = (pw.value ?? "").trim();
    if (!input){
      showErr("パスワードを入力してください。");
      return;
    }

    try{
      const h = await sha256Hex(input);
      if (h === PASSWORD_HASH){
        if (remember.checked){
          try{ localStorage.setItem(LS_KEY, "1"); }catch(e){}
        }else{
          try{ localStorage.removeItem(LS_KEY); }catch(e){}
        }
        unlockUI();
      }else{
        showErr("パスワードが違います。");
      }
    }catch(e){
      showErr("暗号処理に失敗しました。Safariを再読み込みしてください。");
    }
  });

  pw.addEventListener("keydown", (e) => {
    if (e.key === "Enter") unlockBtn.click();
  });

  logoutBtn.addEventListener("click", () => {
    try{ localStorage.removeItem(LS_KEY); }catch(e){}
    pw.value = "";
    lockUI();
    showOk("ログアウトしました。");
  });

  helpHashBtn.addEventListener("click", async () => {
    const p = prompt("管理者用：パスワードを入力すると SHA-256 を表示します");
    if (p == null) return;
    const h = await sha256Hex(p);
    alert("SHA-256（これを PASSWORD_HASH に貼る）:\n\n" + h);
  });

})();
</script>

</body>
</html>